{% load staticfiles %}
{% load i18n %}
<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE }}">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% trans "Euskal Moneta" %}</title>
  <link rel="shortcut icon" href="{% static 'img/favicon.ico' %}" type="image/x-icon">
  <link rel="icon" href="{% static 'img/favicon.ico' %}" type="image/x-icon">
  <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}" media="screen">
  <link rel="stylesheet" href="{% static 'css/style.css' %}" media="screen">
  {% block extra_css %}
  {% endblock %}
  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
    <script src="{% static 'js/html5shiv.min.js' %}"></script>
    <script src="{% static 'js/respond.min.js' %}"></script>
  <![endif]-->
</head>
<body>
  <div class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <a href="{% url 'home' %}" class="navbar-brand">{% trans "Euskal Moneta" %}</a>
        <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#navbar-main">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
      </div>
      <div class="navbar-collapse collapse" id="navbar-main">
        <ul class="nav navbar-nav">
          {% if not user.is_authenticated %}
          <li>
            <a href="{% url 'django.contrib.auth.views.login' %}">{% trans "Connexion" %}</a>
          </li>
          {% else %}
          <li>
            <a href="{% url 'home' %}">{% trans "Accueil" %}</a>
          </li>
          <li>
            <a href="{% url 'django.contrib.auth.views.logout' %}">{% trans "Déconnexion" %}</a>
          </li>
          {% endif %}
        </ul>
        <ul class="nav navbar-nav pull-right">
          <li>
            <a href="/i18n/setlang/" class="lang-select eu">
              <img class="lang-select-flag-eu" alt="Euskara" src="{% static 'img/eu.gif' %}">
            </a>
          </li>
          <li>
            <a href="/i18n/setlang/" class="lang-select fr">
              <img class="lang-select-flag-fr" alt="Français" src="{% static 'img/fr.gif' %}">
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>
  <!-- <div class="container"> -->
  {% block container %}
  <div class="alert alert-warning">
    You extended the 'base.html' template without redefining the block 'container' !
  </div>
  {% endblock %}
  <!-- </div> -->
  <div class="container">
      <footer>
        <div class="row">
          <div class="col-lg-12">
            {% trans "Euskal Moneta" %}
          </div>
        </div>
      </footer>
  </div>
  <script src="{% static 'js/jquery-1.11.2.min.js' %}"></script>
  <script src="{% static 'js/bootstrap.min.js' %}"></script>
  <script src="{% static 'js/moment-with-locales.min.js' %}"></script>
  <script src="{% static 'js/bootstrap3-typeahead.min.js' %}"></script>
  <script>
    $(function()
    {
      // Appel vers la vue générique d'i18n de Django
      // Lors du clic sur un des drapeaux...
      $('.lang-select').click(function(e)
      {
        // Empeche que le navigateur ne suive l'href automatiquement
        event.preventDefault();

        if ($(this).hasClass('eu')) {
          var lang_select = 'eu-fr';
        }
        else {
          var lang_select = 'fr-fr';
        }

        $.post
          ($(this).attr('href'),
           {language: lang_select,
            next: '/',
            csrfmiddlewaretoken: '{{ csrf_token }}'},
           function() {
             // en cas de succès de la requête POST: redirection forcée vers l'accueil
             top.location.href = '/';
           });
      });
    });
  </script>
  {% block extra_js %}
  {% endblock %}
  </body>
  </html>